image: python:3.9-slim
      
stages:
  - tests
  - build

tests:
  stage: tests
  script: 
    - echo "Installing dependencies"
    - pip install pygame pytest pytest-cov pytest-subprocess pytest-mock pytest-lazy-fixture pyudev
    - echo "Running unittests" 
    - export PYTHONPATH=$PYTHONPATH:$(pwd) && pytest --cov=configgen

build:
  stage: build
  script: 
    - echo "Building configgen" 
    - python setup.py install
